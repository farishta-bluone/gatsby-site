(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10c9f08a"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a630"),a("fb6a"),a("b0c0"),a("d3b7"),a("25f0"),a("3ca3");var s=a("6b75");function n(t,e){if(t){if("string"===typeof t)return Object(s["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(s["a"])(t,e):void 0}}},"0eb8":function(t,e,a){},"25f0":function(t,e,a){"use strict";var s=a("6eeb"),n=a("825a"),r=a("d039"),i=a("ad6d"),l="toString",o=RegExp.prototype,c=o[l],d=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=l;(d||u)&&s(RegExp.prototype,l,(function(){var t=n(this),e=String(t.source),a=t.flags,s=String(void 0===a&&t instanceof RegExp&&!("flags"in o)?i.call(t):a);return"/"+e+"/"+s}),{unsafe:!0})},"4df4":function(t,e,a){"use strict";var s=a("0366"),n=a("7b0b"),r=a("9bdd"),i=a("e95a"),l=a("50c4"),o=a("8418"),c=a("35a1");t.exports=function(t){var e,a,d,u,p,f,v=n(t),h="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,b=void 0!==m,y=c(v),x=0;if(b&&(m=s(m,g>2?arguments[2]:void 0,2)),void 0==y||h==Array&&i(y))for(e=l(v.length),a=new h(e);e>x;x++)f=b?m(v[x],x):v[x],o(a,x,f);else for(u=y.call(v),p=u.next,a=new h;!(d=p.call(u)).done;x++)f=b?r(u,m,[d.value,x],!0):d.value,o(a,x,f);return a.length=x,a}},"6b75":function(t,e,a){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}a.d(e,"a",(function(){return s}))},8418:function(t,e,a){"use strict";var s=a("c04e"),n=a("9bf2"),r=a("5c6c");t.exports=function(t,e,a){var i=s(e);i in t?n.f(t,i,r(0,a)):t[i]=a}},"9bdd":function(t,e,a){var s=a("825a"),n=a("2a62");t.exports=function(t,e,a,r){try{return r?e(s(a)[0],a[1]):e(a)}catch(i){throw n(t),i}}},a630:function(t,e,a){var s=a("23e7"),n=a("4df4"),r=a("1c7e"),i=!r((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:i},{from:n})},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");var s=a("06c5");function n(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=Object(s["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return l=t.done,t},e:function(t){o=!0,i=t},f:function(){try{l||null==a["return"]||a["return"]()}finally{if(o)throw i}}}}},c740:function(t,e,a){"use strict";var s=a("23e7"),n=a("b727").findIndex,r=a("44d2"),i=a("ae40"),l="findIndex",o=!0,c=i(l);l in[]&&Array(1)[l]((function(){o=!1})),s({target:"Array",proto:!0,forced:o||!c},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(l)},cb80:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"my-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"auto"}},[a("h2",{staticClass:" font-weight-bold"},[t._v("Annealing Process")])]),a("v-col",{staticClass:"pb-0",attrs:{cols:"auto"}},[a("v-row",{attrs:{justify:"end"}},[a("v-col",{attrs:{cols:"auto"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({staticClass:"body-1",attrs:{dense:"",outlined:"",color:"grey",placeholder:"Select Date",readonly:"",clearable:""},on:{"click:clear":function(e){return t.clearSearch("date")}},model:{value:t.addedFrom,callback:function(e){t.addedFrom=e},expression:"addedFrom"}},"v-text-field",n,!1),s))]}}]),model:{value:t.addedFromMenu,callback:function(e){t.addedFromMenu=e},expression:"addedFromMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.addedFromMenu=!1},change:t.setOptions},model:{value:t.addedFrom,callback:function(e){t.addedFrom=e},expression:"addedFrom"}})],1)],1),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"py-4 body-2 font-weight-bold",attrs:{dark:""},on:{click:function(e){return t.openReport()}}},[t._v("View Report")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1 coils",attrs:{headers:t.headers,items:t.$store.state.annealing.batches,"item-key":"ID",loading:t.$store.state.isLoading,"disable-pagination":"","fixed-header":"",height:"calc(100vh - 190px)","hide-default-footer":""},scopedSlots:t._u([{key:"item.date",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",[t._v(t._s(s.date?t.$options.filters.formatDate(s.date):"---"))])])]}},{key:"item.status",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",{staticClass:"text-capitalize",class:t.getTextColor(s.status)},[t._v(t._s(s.status))])])]}},{key:"item.shift",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",{staticClass:"text-capitalize"},[t._v(t._s(t.getShiftName(s.shift)))])])]}},{key:"item.base",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",{staticClass:"text-capitalize"},[t._v("Base "+t._s(s.base))])])]}},{key:"item.furnace",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",{staticClass:"text-capitalize"},[t._v("Furnace "+t._s(s.furnace))])])]}},{key:"item.temperature",fn:function(e){var s=e.item;return[a("div",{staticClass:"body-2"},[a("span",{staticClass:"text-capitalize"},[t._v(t._s(s.temperature?s.temperature+"(°C)":"---"))])])]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-row",{attrs:{align:"center"}},["in-queue for annealing"===s.status?a("v-col",{staticClass:"pb-0",attrs:{cols:"12"},on:{click:function(e){return t.processBatch(s,"in-queue for annealing")}}},[a("v-btn",{staticClass:"caption",attrs:{small:"",outlined:""}},[t._v("Edit Annealing Planning")])],1):t._e(),"in-queue for annealing"===s.status?a("v-col",{attrs:{cols:"12"},on:{click:function(e){return t.processBatch(s,"in-process for annealing")}}},[a("v-btn",{staticClass:"caption",attrs:{small:"",outlined:""}},[t._v("Start Processing")])],1):t._e(),t.checkRole("member")&&"in-process for annealing"===s.status?a("v-col",{attrs:{cols:"12"},on:{click:function(e){return t.processBatch(s,"approve for annealing")}}},[a("v-btn",{staticClass:"caption",attrs:{small:"",outlined:""}},[t._v("Submit Report")])],1):t._e(),t.checkRole("admin")&&"approve for annealing"===s.status?a("v-col",{attrs:{cols:"12"},on:{click:function(e){return t.processBatch(s,"annealed")}}},[a("v-btn",{staticClass:"caption",attrs:{small:"",outlined:""}},[t._v("View & Mark Complete")])],1):t._e()],1)]}}],null,!0),model:{value:t.$store.state.selRows,callback:function(e){t.$set(t.$store.state,"selRows",e)},expression:"$store.state.selRows"}}),a("v-row",[t.$store.state.annealing.report?a("FurnaceReport"):t._e(),t.$store.state.annealing.drawer?a("AnnealingPlanning"):t._e()],1)],1)},n=[],r=(a("ac1f"),a("1276"),a("96cf"),a("1da1")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-dialog",{staticClass:"py-5",attrs:{"max-width":"750px"},on:{"click:outside":t.clearData},model:{value:t.$store.state.annealing.report,callback:function(e){t.$set(t.$store.state.annealing,"report",e)},expression:"$store.state.annealing.report"}},[a("v-card",[a("v-card-title",[a("p",{staticClass:"body-1 font-weight-bold"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",{staticStyle:{border:"1px solid black"}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"3"}},[a("b",[t._v("Base Number")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("b",[t._v("01")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("b",[t._v("02")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("b",[t._v("03")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("b",[t._v("04")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("b",[t._v("05")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("b",[t._v("06")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("b",[t._v("07")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("b",[t._v("08")])])],1),a("v-row",{staticStyle:{border:"1px solid black","min-height":"90px"},attrs:{align:"center"}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"3"}},[a("b",[t._v("Charge Number")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[t._v(" "+t._s(t.data[0].charge?t.data[0].charge:"N/A")+" ")]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[t._v(" "+t._s(t.data[1].charge?t.data[1].charge:"N/A")+" ")]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[t._v(" "+t._s(t.data[2].charge?t.data[2].charge:"N/A")+" ")]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[t._v(" "+t._s(t.data[3].charge?t.data[3].charge:"N/A")+" ")]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[t._v(" "+t._s(t.data[4].charge?t.data[4].charge:"N/A")+" ")]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[t._v(" "+t._s(t.data[5].charge?t.data[5].charge:"N/A")+" ")]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[t._v(" "+t._s(t.data[6].charge?t.data[6].charge:"N/A")+" ")]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[t._v(" "+t._s(t.data[7].charge?t.data[7].charge:"N/A")+" ")])],1),a("v-row",{staticStyle:{border:"1px solid black","min-height":"90px"},attrs:{align:"center"}},[a("v-col",{staticClass:"pr-0",attrs:{cols:"3"}},[a("b",[t._v("Temperature (°C)")])]),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("v-text-field",{model:{value:t.data[0].temp,callback:function(e){t.$set(t.data[0],"temp",e)},expression:"data[0].temp"}})],1),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("v-text-field",{model:{value:t.data[1].temp,callback:function(e){t.$set(t.data[1],"temp",e)},expression:"data[1].temp"}})],1),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("v-text-field",{model:{value:t.data[2].temp,callback:function(e){t.$set(t.data[2],"temp",e)},expression:"data[2].temp"}})],1),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("v-text-field",{model:{value:t.data[3].temp,callback:function(e){t.$set(t.data[3],"temp",e)},expression:"data[3].temp"}})],1),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("v-text-field",{model:{value:t.data[4].temp,callback:function(e){t.$set(t.data[4],"temp",e)},expression:"data[4].temp"}})],1),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("v-text-field",{model:{value:t.data[5].temp,callback:function(e){t.$set(t.data[5],"temp",e)},expression:"data[5].temp"}})],1),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("v-text-field",{model:{value:t.data[6].temp,callback:function(e){t.$set(t.data[6],"temp",e)},expression:"data[6].temp"}})],1),a("v-col",{staticClass:"pr-0",attrs:{cols:"1"}},[a("v-text-field",{model:{value:t.data[7].temp,callback:function(e){t.$set(t.data[7],"temp",e)},expression:"data[7].temp"}})],1)],1)],1)],1),a("v-card-actions",{staticClass:"pb-5 mt-3"},[a("v-spacer"),a("v-btn",{attrs:{outlined:"",text:""},on:{click:t.close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{dark:""},on:{click:t.savePlanning}},[t._v(" Save ")])],1)],1)],1)],1)],1)},l=[],o=(a("4de4"),a("c740"),a("b85c")),c=a("72ee"),d={components:{},data:function(){return{selDate:null,dateMenu:!1,batches:[],data:[{id:null,charge:null,temp:null,base:1},{id:null,charge:null,temp:null,base:2},{id:null,charge:null,temp:null,base:3},{id:null,charge:null,temp:null,base:4},{id:null,charge:null,temp:null,base:5},{id:null,charge:null,temp:null,base:6},{id:null,charge:null,temp:null,base:7},{id:null,charge:null,temp:null,base:8}]}},mounted:function(){this.getBatches()},computed:{getSelBatch:function(t){var e=this.batches.filter((function(e){return e.base==t}));return e.length>0?e[0]:{charge_no:"",temperature:0}},formTitle:function(){return"Furnace Report"},haltSave:function(){var t=!1;if(this.$store.state.rolling.selRows.length>0){var e,a=Object(o["a"])(this.$store.state.rolling.selRows);try{for(a.s();!(e=a.n()).done;){var s=e.value;if(!s.rolling_date||!s.rolling_shift||!s.rolling_thickness){t=!0;break}}}catch(n){a.e(n)}finally{a.f()}return t}return!0}},methods:{getBatches:function(){var t=this;return c["a"].get({status:"in-process for annealing"}).then((function(e){t.batches=e.data.rows,t.setReport()})).catch((function(t){return console.log("error",t)}))},setReport:function(){var t,e=this,a=Object(o["a"])(this.batches);try{var s=function(){var a=t.value,s=e.data.findIndex((function(t){return t.base==a.base}));e.data[s].id=a.id,e.data[s].charge=a.charge_no,e.data[s].temp=a.temperature};for(a.s();!(t=a.n()).done;)s()}catch(n){a.e(n)}finally{a.f()}},clearData:function(){this.$store.state.rolling.selRows=[]},savePlanning:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.data.filter((function(t){return t.id})),e.next=3,c["a"].updateReport(a);case 3:t.$store.state.annealing.report=!1,t.$store.dispatch("annealing/getBatches",{status:"in-queue for annealing,in-process for annealing,approve for annealing"});case 5:case"end":return e.stop()}}),e)})))()},close:function(){this.$store.state.annealing.report=!1,this.$store.state.annealing.selRows=[]}}},u=d,p=a("2877"),f=Object(p["a"])(u,i,l,!1,null,null,null),v=f.exports,h=a("cc89"),g={components:{AnnealingPlanning:h["a"],FurnaceReport:v},data:function(){return{selDate:null,dateMenu:!1,data:[],selThickness:"",selRows:[],singleSelect:!1,options:{},sortBy:"",orderBy:"desc",selStatus:null,addedFromMenu:!1,addedFrom:null,headers:[{text:"Charge No.",value:"charge_no",sortable:!1,width:"10%"},{text:"Priority",value:"priority",sortable:!1,width:"10%"},{text:"Shift",value:"shift",sortable:!1,width:"10%"},{text:"Date",value:"date",sortable:!1,width:"10%"},{text:"Base",value:"base",sortable:!1,width:"10%"},{text:"Furnace",value:"furnace",width:"10%"},{text:"Temperature",align:"start",value:"temperature",sortable:!1,width:"10%"},{text:"Status",value:"status",sortable:!1,width:"15%"},{text:"Actions",value:"actions",sortable:!1,align:"end",width:"10%"}]}},mounted:function(){this.$store.state.selRows=[],this.$store.dispatch("annealing/getBatches",{status:"in-queue for annealing,in-process for annealing,approve for annealing"}),this.$store.dispatch("getShifts"),this.$store.dispatch("getSlittedCoils",{status:"rolled,rewinded,in-queue for annealing"}),this.$store.dispatch("furnaces/getFurnaceList"),this.$store.dispatch("bases/getBaseList")},watch:{options:{handler:function(t){var e=t.sortBy,a=t.sortDesc;1===e.length&&1===a.length&&(1==a[0]?this.orderBy="desc":this.orderBy="asc",this.sortBy=e[0]),this.searchData()},deep:!0}},methods:{openReport:function(){this.$store.state.annealing.report=!0},processBatch:function(t,e){this.data.status=e,this.$store.state.annealing.batchId=t.id,this.$store.state.annealing.selItem=t,"in-queue for annealing"===e&&(this.$store.state.annealing.drawer=!0),"in-process for annealing"!==e&&"approve for annealing"!==e||this.processPlanning(e),"annealed"===e&&(this.$store.state.annealing.drawer=!0)},processPlanning:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={},n=e.$options.filters.calendarDate((new Date).toISOString()),s.updated_at=n,s.status=t,a.prev=4,e.$store.state.isLoading=!0,a.next=8,c["a"].update(e.$store.state.annealing.batchId,s);case 8:r=a.sent,console.log("result",r),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](4),console.log("error",a.t0);case 15:return a.prev=15,e.$store.state.isLoading=!1,e.$store.dispatch("annealing/getBatches",{status:"in-queue for annealing,in-process for annealing,approve for annealing"}),a.finish(15);case 19:case"end":return a.stop()}}),a,null,[[4,12,15,19]])})))()},checkRole:function(t){var e=JSON.parse(localStorage.getItem("user"));return!(!e||e.role!=t)},getShiftName:function(t){return 1===t?"Day Shift":2===t?"Night Shift":"24 Hour Shift"},editPlanning:function(t){var e=this.$options.filters.calendarDate(t.rolling_date).split(" ");t.rolling_date=e[0],t.dateMenu=!1,this.$store.state.rolling.selRows=[t],this.$store.state.rolling.dialog=!0},setOptions:function(){this.searchData()},getTextColor:function(t){var e="";switch(t){case"slitted":e="grey--text text--darken-1";break;case"available":e="green--text text--darken-2";break;case"edit-required":e="red--text text--lighten-1";break;default:e="yellow--text text--darken-4";break}return e},clearSearch:function(t){"date"===t?this.addedFrom=null:"status"===t?this.selStatus=null:"company"===t?this.selCompany=null:"thickness"===t&&(this.selThickness=null),this.setOptions()},searchData:function(){var t={status:"in-queue for annealing,in-process for annealing,approve for annealing"};this.addedFrom&&(t.date=this.addedFrom),this.selThickness&&(t.rolling_thickness=this.selThickness),this.$store.dispatch("annealing/getBatches",t)}}},m=g,b=(a("df6c"),Object(p["a"])(m,s,n,!1,null,null,null));e["default"]=b.exports},cc89:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$store.state.annealing.drawer?a("v-navigation-drawer",{staticStyle:{position:"fixed",top:"0",right:"0","overflow-y":"scroll","z-index":"101"},attrs:{temporary:"",right:"",width:"400"},model:{value:t.$store.state.annealing.drawer,callback:function(e){t.$set(t.$store.state.annealing,"drawer",e)},expression:"$store.state.annealing.drawer"}},[a("div",{staticClass:"subtitle-1 font-weight-bold px-4 py-2"},[a("span",[t._v(t._s(t.$store.state.annealing.batchId?"Edit Planning":"Create Planning"))]),a("v-icon",{staticClass:"float-right",on:{click:t.close}},[t._v(" mdi-close-circle ")])],1),a("v-divider"),a("v-container",[a("v-row",{staticClass:"px-4 mt-4"},[a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{items:t.$store.state.slittedCoils,"item-text":"slit_no","item-value":"ID",label:"Select Coils",outlined:"",color:"grey",dense:"","return-object":!1,multiple:"",readonly:!!t.$store.state.annealing.batchId},model:{value:t.selCoils,callback:function(e){t.selCoils="string"===typeof e?e.trim():e},expression:"selCoils"}})],1),a("v-col",{staticClass:"py-0 my-0",attrs:{cols:"6"}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.$store.state.bases.baseList,label:"Select Base","item-text":"name","item-value":"id",color:"grey"},model:{value:t.data.base,callback:function(e){t.$set(t.data,"base",e)},expression:"data.base"}})],1),a("v-col",{staticClass:"py-0 my-0",attrs:{cols:"6"}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.$store.state.furnaces.furnaceList,label:"Select Furnace","item-text":"name","item-value":"id",color:"grey"},model:{value:t.data.furnace,callback:function(e){t.$set(t.data,"furnace",e)},expression:"data.furnace"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({staticClass:"body-1",attrs:{dense:"",outlined:"",color:"grey",placeholder:"Select Date",clearable:""},on:{"click:clear":function(e){return t.clearSearch("date")}},model:{value:t.selDate,callback:function(e){t.selDate=e},expression:"selDate"}},"v-text-field",n,!1),s))]}}],null,!1,654077171),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.dateMenu=!1},change:t.searchData},model:{value:t.selDate,callback:function(e){t.selDate=e},expression:"selDate"}})],1)],1),a("v-col",{staticClass:"py-0 my-0",attrs:{cols:"6"}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.$store.state.shifts,label:"Select Shift","item-text":"name","item-value":"id",color:"grey"},model:{value:t.data.shift,callback:function(e){t.$set(t.data,"shift",e)},expression:"data.shift"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Charge No",outlined:"",dense:"",color:"grey"},model:{value:t.data.charge_no,callback:function(e){t.$set(t.data,"charge_no",e)},expression:"data.charge_no"}})],1),a("v-col",{staticClass:"py-0 my-0",attrs:{cols:"6"}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.priorities,label:"Select Priority",color:"grey"},model:{value:t.data.priority,callback:function(e){t.$set(t.data,"priority",e)},expression:"data.priority"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-textarea",{attrs:{outlined:"",color:"grey","auto-grow":"",dense:"",rows:"1",label:"Remarks"},model:{value:t.data.notes,callback:function(e){t.$set(t.data,"notes",e)},expression:"data.notes"}})],1)],1)],1),a("v-divider"),a("div",{staticClass:"ma-4 mt-8 float-right"},[a("v-btn",{staticClass:"mr-2",attrs:{outlined:""},on:{click:t.close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{dark:t.validateForm,disabled:!t.validateForm},on:{click:function(e){return t.submitHandler()}}},[t._v(" Save ")])],1)],1):t._e()},n=[],r=(a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("96cf"),a("1da1")),i=a("b85c"),l=a("72ee"),o=a("e5ca"),c={name:"AddCoil",data:function(){return{selCoils:[],drawer:null,data:{},maxDate:(new Date).toISOString(),dateMenu:!1,selDate:null,selThickness:null,coilStatus:"available",priorities:["P1","P2","P3","P4","P5","P6"],prevStatus:""}},computed:{validateForm:function(){return!!(this.selCoils.length>0&&this.data.shift&&this.data.base&&this.selDate&&this.data.furnace&&this.data.charge_no&&this.data.priority)}},mounted:function(){if(this.$store.state.annealing.batchId){var t=Object.assign({},this.$store.state.annealing.selItem),e=this.$options.filters.calendarDate(t.date).split(" ");this.selDate=e,this.prevStatus=t.status;var a,s=Object(i["a"])(t.coils.split(","));try{for(s.s();!(a=s.n()).done;){var n=a.value;this.selCoils.push(parseInt(n))}}catch(p){s.e(p)}finally{s.f()}var r=t.base,l=t.furnace,o=t.shift,c=t.charge_no,d=t.priority,u=t.notes;this.selDate=e[0],this.data={base:r,furnace:l,shift:o,charge_no:c,priority:d,notes:u}}else this.data={},this.selCoils=[],this.selDate=null},methods:{submitHandler:function(){this.$store.state.annealing.batchId?this.editBatch():this.addBatch()},clearSearch:function(t){console.log("data",t)},searchData:function(){},addThickness:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o["a"].add({value:parseFloat(t)});case 3:s=a.sent,console.log("result",s),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log("error",a.t0);case 10:return a.prev=10,e.$store.dispatch("getThicknesses"),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})))()},addBatch:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$options.filters.calendarDate((new Date).toISOString()),t.data.date=t.selDate,t.data.created_at=a,t.data.updated_at=a,t.data.coils=t.selCoils.toString(),t.data.status="in-queue for annealing",e.prev=6,t.$store.state.annealing.drawer=!1,t.$store.state.isLoading=!0,e.next=11,l["a"].add(t.data);case 11:s=e.sent,console.log("result",s),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](6),console.log("error",e.t0);case 18:return e.prev=18,t.$store.state.isLoading=!1,t.$store.state.annealing.batchId?t.$store.dispatch("annealing/getBatches",{status:"in-queue for annealing,in-process for annealing,approve for annealing"}):t.$store.dispatch("getSlittedCoils",{status:"rolled,rewinded",page:1,limit:10}),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[6,15,18,22]])})))()},editBatch:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$options.filters.calendarDate((new Date).toISOString()),t.data.date=t.selDate,t.data.updated_at=a,t.data.coils=t.selCoils.toString(),t.data.status="approve for annealing"===t.prevStatus?"annealed":"in-queue for annealing",e.prev=5,t.$store.state.annealing.drawer=!1,t.$store.state.isLoading=!0,e.next=10,l["a"].update(t.$store.state.annealing.batchId,t.data);case 10:s=e.sent,console.log("result",s),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),console.log("error",e.t0);case 17:return e.prev=17,t.$store.state.isLoading=!1,t.$store.state.annealing.batchId?t.$store.dispatch("annealing/getBatches",{status:"in-queue for annealing,in-process for annealing,approve for annealing"}):t.$store.dispatch("getSlittedCoils",{status:"rolled,rewinded",page:1,limit:10}),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[5,14,17,21]])})))()},close:function(){this.$store.state.annealing.drawer=!1}}},d=c,u=a("2877"),p=Object(u["a"])(d,s,n,!1,null,null,null);e["a"]=p.exports},df6c:function(t,e,a){"use strict";a("0eb8")},fb6a:function(t,e,a){"use strict";var s=a("23e7"),n=a("861d"),r=a("e8b5"),i=a("23cb"),l=a("50c4"),o=a("fc6a"),c=a("8418"),d=a("b622"),u=a("1dde"),p=a("ae40"),f=u("slice"),v=p("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),g=[].slice,m=Math.max;s({target:"Array",proto:!0,forced:!f||!v},{slice:function(t,e){var a,s,d,u=o(this),p=l(u.length),f=i(t,p),v=i(void 0===e?p:e,p);if(r(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?n(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(u,f,v);for(s=new(void 0===a?Array:a)(m(v-f,0)),d=0;f<v;f++,d++)f in u&&c(s,d,u[f]);return s.length=d,s}})}}]);
//# sourceMappingURL=chunk-10c9f08a.a6103cbc.js.map